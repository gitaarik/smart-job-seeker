import{useApi as e,useStores as t,defineInterface as a}from"@directus/extensions-sdk";import{defineComponent as n,ref as l,computed as i,onMounted as o,onUnmounted as r,watch as s,resolveComponent as u,resolveDirective as d,createElementBlock as c,openBlock as f,createBlock as p,createCommentVNode as m,normalizeClass as g,withCtx as v,createElementVNode as h,toDisplayString as _,withDirectives as y,createVNode as w}from"vue";const b=e=>e instanceof Element,x=e=>e instanceof HTMLInputElement,$=e=>e instanceof HTMLTextAreaElement,S=e=>e instanceof HTMLSelectElement,E=e=>{if(console.log("Extracting value from element:",e,"tagName:",e.tagName,"classes:",e.className),"true"===e.getAttribute("contenteditable")){const t=e.textContent?.trim()||null;return console.log("Contenteditable value:",t),t}if(x(e)||$(e)){const t=e.value?.trim()||null;return console.log("Input/textarea value:",t),t}if((e.classList.contains("v-input__input")||e.classList.contains("v-textarea__input")||e.classList.contains("v-field__input"))&&(x(e)||$(e))){const t=e.value?.trim()||null;return console.log("Vue component value:",t),t}if("div"===e.tagName.toLowerCase()){const t=e.querySelector("input, textarea");if(t){const e=t.value?.trim()||null;return console.log("Div child input value:",e),e}const a=e.querySelector('[contenteditable="true"]');if(a){const e=a.textContent?.trim()||null;return console.log("Div contenteditable child value:",e),e}const n=e.textContent?.trim()||null;return console.log("Div text content:",n),n}if(S(e)){const t=e.value?.trim()||null;return console.log("Select value:",t),t}const t=e.textContent?.trim()||null;return console.log("Fallback text content:",t),t},L=e=>{const t=(e=>{console.log(`Searching for field: ${e}`);const t=[`[data-field="${e}"]`,`[data-field="${e}"] input`,`[data-field="${e}"] textarea`,`[data-field="${e}"] .v-input input`,`[data-field="${e}"] .v-textarea textarea`,`[data-field="${e}"] .v-field input`,`[data-field="${e}"] .v-field textarea`,`[data-field="${e}"] .interface-translations input`,`[data-field="${e}"] .interface-translations textarea`,`[data-field="${e}"] .interface-translations [contenteditable]`,`[data-field="${e}"] .translations-editor input`,`[data-field="${e}"] .translations-editor textarea`,`[data-field="${e}"] .translation-field input`,`[data-field="${e}"] .translation-field textarea`,`[data-field="${e}"] .interface-many-to-any input`,`[data-field="${e}"] .interface-many-to-one input`,`[data-field="${e}"] .interface-one-to-many input`,`[data-field="${e}"] .relation-field input`,`[data-field="${e}"] .m2a-field input`,`[data-field="${e}"] .m2o-field input`,`[data-field="${e}"] .o2m-field input`,`input[name="${e}"]`,`input[id="${e}"]`,`textarea[name="${e}"]`,`textarea[id="${e}"]`,`[data-ky-field="${e}"]`,`.field-${e} input`,`.field-${e} textarea`,`[data-field="${e}"] input[type="date"]`,`[data-field="${e}"] input[type="datetime-local"]`,'[data-field="date"] input[type="date"]','[data-field="datetime"] input[type="datetime-local"]','[data-field="timestamp"] input',`[contenteditable="true"][data-ky-field="${e}"]`,`[data-field="${e}"] [contenteditable="true"]`,`[data-field="${e}"] .v-input__input`,`[data-field="${e}"] .v-textarea__input`,`[data-field="${e}"] .v-field__input`,'[data-field="date"] .v-field__input','[data-field="datetime"] .v-field__input',`div[class*="prepend"][data-field="${e}"]`,`div[class*="date"][data-field="${e}"]`,'div[class*="date"]'];for(const a of t){console.log(`Trying selector: ${a}`);const t=document.querySelector(a);if(b(t)){console.log(`Found element for selector "${a}":`,t);const n=E(t);if(n){const a="true"===t.getAttribute("contenteditable")?"contenteditable":t.classList.contains("v-input__input")||t.classList.contains("v-textarea__input")||t.classList.contains("v-field__input")?"input":"div"===t.tagName.toLowerCase()?"div":"textarea";return console.log(`Successfully found field "${e}" with value:`,n),{element:t,value:n,type:a}}console.log(`Element found but no value extracted for selector: ${a}`)}else console.log(`No element found for selector: ${a}`)}return console.log(`No field element found for: ${e}`),null})(e);if(t&&t.value){let a=t.value;if(((e,t)=>[e.toLowerCase().includes("date"),e.toLowerCase().includes("time"),"date"===t.getAttribute("type"),"datetime-local"===t.getAttribute("type"),t.closest('[data-field="date"]'),t.closest('[data-field="datetime"]'),t.closest('[data-field="timestamp"]'),t.classList.contains("date"),t.classList.contains("datetime")].some(Boolean))(e,t.element)){const e=(e=>{const t=e.match(/^(?:Date)?([a-zA-Z]+)\s*-?\s*(\d{1,2})(?:st|nd|rd|th)?\s*,?\s*(\d{4})$/i);if(t)try{const[,e,a,n]=t,l=["january","february","march","april","may","june","july","august","september","october","november","december"].indexOf(e.toLowerCase());if(-1!==l){const e=(l+1).toString().padStart(2,"0"),t=a.padStart(2,"0"),i=new Date,o=i.getSeconds().toString().padStart(2,"0"),r=i.getHours().toString().padStart(2,"0");return{success:!0,value:`${n}${e}${t}${r}${i.getMinutes().toString().padStart(2,"0")}${o}`,format:"natural"}}}catch(e){console.warn("Natural date parsing failed:",e)}const a=[{regex:/^\d{4}-\d{2}-\d{2}/,format:"iso"},{regex:/^\d{1,2}\/\d{1,2}\/\d{4}/,format:"natural"},{regex:/(\d{1,4})[\/\-](\d{1,2})[\/\-](\d{1,4})/,format:"iso"},{regex:/(\d{1,2})\.(\d{1,2})\.(\d{2,4})/,format:"dd_mm_yy"},{regex:/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/,format:"mm_dd_yy"}];for(const t of a){const a=e.match(t.regex);if(a)try{let n=null,l=null;if("iso"===t.format)n=new Date(e);else if("dd_mm_yy"===t.format){const[,e,t,n]=a,i=2===n.length?`20${n}`:n,o=new Date,r=o.getHours().toString().padStart(2,"0"),s=o.getMinutes().toString().padStart(2,"0");l=`${e.padStart(2,"0")}${t.padStart(2,"0")}${i}-${r}${s}`}else if("mm_dd_yy"===t.format){const[,e,t,n]=a,i=2===n.length?`20${n}`:n,o=new Date,r=o.getHours().toString().padStart(2,"0"),s=o.getMinutes().toString().padStart(2,"0");l=`${t.padStart(2,"0")}${e.padStart(2,"0")}${i}-${r}${s}`}if(n&&!isNaN(n.getTime())){const e=new Date,t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0");l=`${i}${(n.getMonth()+1).toString().padStart(2,"0")}${n.getFullYear().toString()}-${t}${a}`}if(l)return{success:!0,value:l,format:t.format}}catch(e){console.warn("Date parsing failed:",e)}}return{success:!1,value:null,format:null}})(a);e.success&&e.value&&(a=e.value)}return a}return null},F={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"ts","ч":"ch","ш":"sh","щ":"sch","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"Y","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"Ts","Ч":"Ch","Ш":"Sh","Щ":"Sch","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","є":"ye","ї":"yi","і":"i","ґ":"g","Є":"Ye","Ї":"Yi","І":"I","Ґ":"G","ä":"ae","ö":"oe","ü":"ue","ß":"ss","å":"a","æ":"ae","ø":"o","Ä":"Ae","Ö":"Oe","Ü":"Ue","Å":"A","Æ":"Ae","Ø":"O","á":"a","à":"a","â":"a","ą":"a","ć":"c","ç":"c","č":"c","ĉ":"c","ď":"d","đ":"d","é":"e","è":"e","ê":"e","ë":"e","ę":"e","ě":"e","í":"i","ì":"i","î":"i","ï":"i","ł":"l","ń":"n","ň":"n","ñ":"ny","ó":"o","ò":"o","ô":"o","ő":"o","ř":"r","ś":"s","š":"s","ş":"s","ť":"t","ú":"u","ù":"u","û":"u","ů":"u","ű":"u","ý":"y","ÿ":"y","ź":"z","ż":"z","ž":"z","Á":"A","À":"A","Â":"A","Ą":"A","Ć":"C","Ç":"C","Č":"C","Ĉ":"C","Ď":"D","Đ":"D","É":"E","È":"E","Ê":"E","Ë":"E","Ę":"E","Ě":"E","Í":"I","Ì":"I","Î":"I","Ï":"I","Ł":"L","Ń":"N","Ň":"N","Ñ":"Ny","Ó":"O","Ò":"O","Ô":"O","Ő":"O","Ř":"R","Ś":"S","Š":"S","Ş":"S","Ť":"T","Ú":"U","Ù":"U","Û":"U","Ů":"U","Ű":"U","Ý":"Y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z"},V=(e,t={})=>{const{separator:a="-",lowercase:n=!0}=t;if(!e||"string"!=typeof e)return"";const l=/^https?:\/\//i.test(e);let i=n?e.toLowerCase():e;if(l){const[e,t]=i.split("://");if(e&&t){i=`${e}://${t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\-/.:]/g,"").trim()}`}}else i=(e=>e&&"string"==typeof e?e.split("").map(e=>F[e]||e).join(""):"")(i),i=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\-/ ]/g,"").trim().replace(/\s+/g,a);l||(i=i.replace(/[-/]+/g,a),i=i.replace(new RegExp(`${a}+`,"g"),a));const o=i.endsWith("/"),r=i.startsWith("/");return l||(i=i.replace(new RegExp(`^${a}|${a}$`,"g"),"")),l||!r||i.startsWith("/")||(i="/"+i),o&&!i.endsWith("/")&&(i+="/"),i};function U(){const e="undefined"!=typeof crypto?crypto:void 0;if(e&&"randomUUID"in e&&"function"==typeof e.randomUUID)return e.randomUUID();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}var k=Object.defineProperty,C=(e,t,a)=>((e,t,a)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a)(e,"symbol"!=typeof t?t+"":t,a);class A{constructor(e){C(this,"config"),C(this,"isUpdating",!1),C(this,"lastSourceValue",null),this.config={separator:"-",lowercase:!0,autoUpdate:!0,preserveExisting:!1,updateOnChange:!0,updateOnBlur:!1,updateOnFocus:!1,generationMode:"slug",...e}}initialize(){if(!this.config.autoUpdate)return;const e=this.findSourceElement();e?(this.config.updateOnChange&&this.addChangeListener(e),this.config.updateOnBlur&&this.addBlurListener(e),this.config.updateOnFocus&&this.addFocusListener(e),this.performUpdate()):console.warn(`AutoUpdater: Source field "${this.config.sourceField}" not found`)}async update(){return this.performUpdate()}async performUpdate(){if(this.isUpdating)return{success:!1,oldValue:null,newValue:null,sourceValue:null,error:"Update already in progress"};this.isUpdating=!0;try{const e=L(this.config.sourceField),t=this.findTargetElement();if(!t)return{success:!1,oldValue:null,newValue:null,sourceValue:e,error:`Target field "${this.config.targetField}" not found`};const a=this.getFieldValue(t);if(this.config.preserveExisting&&a&&""!==a.trim())return{success:!0,oldValue:a,newValue:a,sourceValue:e,error:"Preserving existing value"};if(e===this.lastSourceValue&&a)return{success:!0,oldValue:a,newValue:a,sourceValue:e,error:"Source value unchanged"};let n=null;if("uuid"===this.config.generationMode)n=U(),this.setFieldValue(t,n),this.lastSourceValue="__uuid__";else if(e){const a={separator:this.config.separator||"-",lowercase:!1!==this.config.lowercase};n=V(e,a),this.setFieldValue(t,n),this.lastSourceValue=e}else this.setFieldValue(t,""),this.lastSourceValue=null;return{success:!0,oldValue:a,newValue:n,sourceValue:e}}catch(e){return{success:!1,oldValue:null,newValue:null,sourceValue:null,error:e instanceof Error?e.message:"Unknown error"}}finally{this.isUpdating=!1}}findSourceElement(){const e=[`[data-field="${this.config.sourceField}"]`,`input[name="${this.config.sourceField}"]`,`textarea[name="${this.config.sourceField}"]`,`[data-ky-field="${this.config.sourceField}"]`,`[data-field="${this.config.sourceField}"] input`,`[data-field="${this.config.sourceField}"] textarea`,`[data-field="${this.config.sourceField}"] .v-input__input`,`[data-field="${this.config.sourceField}"] .v-textarea__input`,`[data-field="${this.config.sourceField}"] .v-field__input`];for(const t of e){const e=document.querySelector(t);if(e)return e}return null}findTargetElement(){const e=[`[data-field="${this.config.targetField}"]`,`input[name="${this.config.targetField}"]`,`textarea[name="${this.config.targetField}"]`,`[data-ky-field="${this.config.targetField}"]`,`[data-field="${this.config.targetField}"] input`,`[data-field="${this.config.targetField}"] textarea`,`[data-field="${this.config.targetField}"] .v-input__input`,`[data-field="${this.config.targetField}"] .v-textarea__input`,`[data-field="${this.config.targetField}"] .v-field__input`];for(const t of e){const e=document.querySelector(t);if(e)return e}return null}getFieldValue(e){return"true"===e.getAttribute("contenteditable")?e.textContent:e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e.classList.contains("v-input__input")||e.classList.contains("v-textarea__input")?e.value:null}setFieldValue(e,t){"true"===e.getAttribute("contenteditable")?e.textContent=t:(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e.classList.contains("v-input__input")||e.classList.contains("v-textarea__input"))&&(e.value=t);const a=new Event("input",{bubbles:!0});e.dispatchEvent(a)}addChangeListener(e){const t=()=>{setTimeout(()=>this.performUpdate(),100)};e.addEventListener("input",t),e.addEventListener("change",t)}addBlurListener(e){e.addEventListener("blur",()=>{setTimeout(()=>this.performUpdate(),100)})}addFocusListener(e){e.addEventListener("focus",()=>{setTimeout(()=>this.performUpdate(),100)})}destroy(){this.isUpdating=!1,this.lastSourceValue=null}}const T={class:"slug-generator"},O={key:1,class:"slug-preview-mode"},D={class:"action-buttons"},N={key:2,class:"preview-container"},q=["href","target"],M={key:3,class:"validation-message"},B="status";var I=n({__name:"interface",props:{value:{default:null},disabled:{type:Boolean,default:!1},select_collection:{default:null},select_field:{default:null},generation_mode:{default:"slug"},auto:{type:Boolean,default:!0},required:{type:Boolean,default:!0},separator:{default:"-"},lowercase:{type:Boolean,default:!0},placeholder:{default:"Enter a slug or url..."},collection:{},field:{},primaryKey:{default:null},custom_empty_message:{default:null},custom_format_message:{default:null},custom_unique_message:{default:null},allow_duplicates:{type:Boolean,default:!1},status:{default:null},auto_update_mode:{default:"change"},preserve_existing:{type:Boolean,default:!1},update_delay:{default:100},show_preview_link:{type:Boolean,default:!0},preview_base_url:{default:""},preview_open_in_new_tab:{type:Boolean,default:!0}},emits:["input","validation"],setup(a,{emit:n}){const b=a,E=n,F=e(),{items:k}=t(),C=l(b.value||""),I=l(!0),z=l(""),P=l(""),H=l(!1),R=l("");let Y=null,j=null;const G=async()=>{if(!C.value)return{isValid:!0,message:"",status:"valid"};const e=b.status||((e="status")=>{const t=[`[name='${e}']`,`select[name='${e}']`,`[data-field='${e}'] input, [data-field='${e}'] select`];for(const e of t){const t=document.querySelector(e);if(x(t)||$(t)||S(t))return t.value}return null})();if("draft"===e)return{isValid:!0,message:"",status:"valid"};if(!(/^https?:\/\//i.test(C.value)?/^https?:\/\/[^\s<>"{}|\\^~[\]`]+$/i:/^[^\s<>"{}|\\^~[\]`]+$/i).test(C.value))return{isValid:!1,message:b.custom_format_message||"Please enter a valid URL or slug.",status:"invalid"};if(!b.allow_duplicates){if(!await(async e=>{if(!b.collection||!e)return!0;try{return 0===(await F.get(`/items/${b.collection}`,{params:{filter:{[b.field]:{_eq:e},...b.primaryKey&&{id:{_neq:b.primaryKey}}},limit:1}})).data.data.length}catch(e){return console.error("Error checking slug uniqueness:",e),!0}})(C.value))return{isValid:!1,message:b.custom_unique_message||"This slug is already in use.",status:"invalid"}}return{isValid:!0,message:"",status:"valid"}},Z=async()=>{const e=await G();I.value=e.isValid,z.value=e.message,E("validation",e.isValid)},K=async e=>{const t=(e=>"string"==typeof e)(e)?e:e&&"object"==typeof e&&"target"in e&&x(e.target)?e.target.value:"";if("uuid"===b.generation_mode)return C.value=t,await Z(),void E("input",C.value);if(""===t&&b.auto&&X.value)if(await ee(),P.value){const e={separator:b.separator,lowercase:b.lowercase};C.value=V(P.value,e)}else C.value="";else if(t&&b.auto&&!R.value){const e={separator:b.separator,lowercase:b.lowercase};C.value=V(t,e)}else C.value=t;await Z(),E("input",C.value)},W=e=>{"Escape"===e.key?(C.value=R.value,Q()):"Enter"===e.key&&Q()},J=()=>{b.disabled||(R.value=C.value||"",H.value=!0,C.value||(C.value=b.value||""))},Q=()=>{H.value=!1,Z()},X=i(()=>b.select_field||b.select_collection),ee=async()=>{if(!X.value)return;const e=L(X.value);e&&(P.value=e)},te=async()=>{if(console.log("Regenerating slug...",{generation_mode:b.generation_mode,select_field:b.select_field,selectedSourceField:X.value}),"uuid"===b.generation_mode)return C.value=U(),await Z(),void E("input",C.value);const e=X.value||b.select_field||"title";console.log("Looking for source field:",e);const t=L(e);if(console.log("Processed value from source field:",t),t){P.value=t;const e={separator:b.separator,lowercase:b.lowercase},a=V(t,e);console.log("Generated new slug:",a),C.value=a,await Z(),E("input",C.value)}else{console.warn("No source value found for field:",e);const t=["title","name","heading","label"];for(const e of t){const t=L(e);if(t){console.log(`Using fallback field "${e}" with value:`,t),P.value=t;const a={separator:b.separator,lowercase:b.lowercase},n=V(t,a);return C.value=n,await Z(),void E("input",C.value)}}console.error("No suitable source field found for slug generation")}},ae=()=>{if(j&&(j.destroy(),j=null),"disabled"===b.auto_update_mode||!b.select_field&&"uuid"!==b.generation_mode)return;const e={sourceField:b.select_field||b.field,targetField:b.field,separator:b.separator,lowercase:b.lowercase,autoUpdate:!0,preserveExisting:b.preserve_existing,updateOnChange:"change"===b.auto_update_mode||"realtime"===b.auto_update_mode,updateOnBlur:"blur"===b.auto_update_mode,updateOnFocus:"focus"===b.auto_update_mode,generationMode:"uuid"===b.generation_mode?"uuid":"slug"};j=function(e){return new A(e)}(e),j.initialize()};let ne=null;const le=()=>{const e=document.querySelector(".header-bar");if(I.value){document.querySelectorAll('[data-disabled-by-slug="true"]').forEach(e=>{x(e)&&(e.disabled=!1,e.removeAttribute("data-disabled-by-slug"))}),e&&e.classList.remove("slug-validation-error")}else if(e){e.classList.add("slug-validation-error");e.querySelectorAll("button:not(.slug-generator button)").forEach(e=>{x(e)&&(e.disabled=!0,e.setAttribute("data-disabled-by-slug","true"))})}},ie=()=>{Z()};o(async()=>{if((!C.value||""===C.value)&&b.auto)if("uuid"===b.generation_mode)C.value=U(),await Z(),E("input",C.value);else{const e=b.select_field||"title",t=L(e);if(t){P.value=t;const e={separator:b.separator,lowercase:b.lowercase};C.value=V(t,e),await Z(),E("input",C.value)}}await Z(),ne=setInterval(()=>{le()},1e3),Y=document.querySelector(`[name='${B}']`),Y||(Y=document.querySelector(`select[name='${B}']`)),Y&&Y.addEventListener("change",ie),ae()}),r(()=>{ne&&clearInterval(ne),Y&&Y.removeEventListener("change",ie),j&&(j.destroy(),j=null)}),s(C,()=>{Z(),le()}),s(()=>b.value,e=>{e!==C.value&&(C.value=e||"",Z())}),s(()=>{if(b.auto){if("uuid"===b.generation_mode)return null;const e=b.select_field||"title";return L(e)}return null},async e=>{if(e&&b.auto&&(!C.value||""===C.value)){P.value=e;const t={separator:b.separator,lowercase:b.lowercase};C.value=V(e,t),await Z(),E("input",C.value)}}),s(()=>[b.auto_update_mode||"disabled",b.preserve_existing||!1,b.update_delay||100],()=>{ae()}),s(()=>b.select_field,()=>{ae()});const oe=i(()=>{const e=(C.value||"").trim();if(!e)return"";if((e=>/^https?:\/\//i.test(e))(e))return e;const t=(b.preview_base_url||"").trim();if(!t)return"";return`${t.replace(/\/+$/,"")}/${e.replace(/^\/+/,"")}`}),re=i(()=>!!b.show_preview_link),se=i(()=>!1!==b.preview_open_in_new_tab);return(e,t)=>{const a=u("v-icon"),n=u("v-input"),l=u("v-button"),i=d("tooltip");return f(),c("div",T,[H.value?(f(),p(n,{key:0,modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),placeholder:e.placeholder,disabled:e.disabled,class:g({"has-error":!I.value}),small:"",autofocus:"",onInput:K,onBlur:Q,onKeydown:W},{append:v(()=>[C.value?(f(),p(a,{key:0,name:I.value?"check":"warning",class:g(I.value?"valid-icon":"invalid-icon")},null,8,["name","class"])):m("v-if",!0)]),_:1},8,["modelValue","placeholder","disabled","class"])):(f(),c("div",O,[h("span",{class:"slug-display",onClick:J},_(C.value||e.placeholder),1),h("div",D,[e.disabled?m("v-if",!0):y((f(),p(l,{key:0,"x-small":"",secondary:"",icon:"",class:"action-button",onClick:J},{default:v(()=>[w(a,{name:"edit"})]),_:1})),[[i,"Edit slug"]]),e.disabled||"uuid"!==b.generation_mode&&!X.value&&!b.select_field?m("v-if",!0):y((f(),p(l,{key:1,"x-small":"",secondary:"",icon:"",class:"action-button",onClick:te},{default:v(()=>[w(a,{name:"autorenew"})]),_:1})),[[i,"uuid"===b.generation_mode?"Generate new UUID":"Regenerate from source"]])])])),re.value&&oe.value?(f(),c("div",N,[h("a",{class:"preview-link",href:oe.value,target:se.value?"_blank":"_self",rel:"noopener noreferrer"},_(oe.value),9,q)])):m("v-if",!0),I.value?m("v-if",!0):(f(),c("div",M,_(z.value),1))])}}}),z=[],P=[];!function(e,t){if(e&&"undefined"!=typeof document){var a,n=!0===t.prepend?"prepend":"append",l=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(l){var o=z.indexOf(i);-1===o&&(o=z.push(i)-1,P[o]={}),a=P[o]&&P[o][n]?P[o][n]:P[o][n]=r()}else a=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),l=0;l<a.length;l++)e.setAttribute(a[l],t.attributes[a[l]]);var o="prepend"===n?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}("\n.slug-generator[data-v-c1e1b218] {\n  width: 100%;\n}\n.validation-message[data-v-c1e1b218] {\n  margin-top: 4px;\n  font-size: 12px;\n  color: var(--theme--danger);\n}\n.slug-preview-mode[data-v-c1e1b218] {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: calc(var(--theme--form--field--input--padding) / 3);\n  background-color: var(--theme--form--field--input--background);\n  border: var(--theme--border-width) solid var(--theme--border-color);\n  border-radius: var(--theme--border-radius);\n  justify-content: space-between;\n}\n.slug-display-wrapper[data-v-c1e1b218] {\n  flex-grow: 1;\n  cursor: text;\n  min-width: 0;\n}\n.slug-display[data-v-c1e1b218] {\n  font-family: var(--theme--fonts--sans--font-family);\n  color: var(--theme--foreground);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n  width: 100%;\n  cursor: pointer;\n}\n.action-buttons[data-v-c1e1b218] {\n  display: flex;\n  gap: 8px;\n  margin-left: 8px;\n  flex-shrink: 0;\n}\n.action-button[data-v-c1e1b218] {\n  color: var(--theme--foreground-subdued);\n}\n.action-button[data-v-c1e1b218]:hover {\n  color: var(--theme--foreground);\n}\n.has-error[data-v-c1e1b218] {\n  border-color: var(--theme--danger);\n}\n.valid-icon[data-v-c1e1b218] {\n  color: var(--theme--success);\n}\n.invalid-icon[data-v-c1e1b218] {\n  color: var(--theme--danger);\n}\n.preview-container[data-v-c1e1b218] {\n  margin-top: 6px;\n}\n.preview-link[data-v-c1e1b218] {\n  font-size: 12px;\n  color: var(--theme--primary);\n  text-decoration: underline;\n  word-break: break-all;\n}\n",{});var H=a({id:"slug-generator",name:"Slug Generator",icon:"link",description:"Generate and validate a slug from another field",component:((e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a})(I,[["__scopeId","data-v-c1e1b218"]]),types:["string"],group:"standard",options:[{field:"generation_mode",name:"Generation Mode",type:"string",meta:{width:"half",interface:"select-dropdown",options:{choices:[{text:"Slug",value:"slug"},{text:"UUID v4",value:"uuid"}]}},schema:{default_value:"slug"}},{field:"select_collection",name:"Source Collection",type:"string",meta:{width:"half",interface:"system-collection",options:{allowPrimaryKey:!1,allowNone:!1,includeCollections:["translations"]}}},{field:"status_field",name:"Status Field",type:"string",meta:{width:"half",interface:"system-field",options:{collectionField:"select_collection",allowPrimaryKey:!1,allowNone:!1,fieldFilter:{type:["string"]}}}},{field:"auto",name:"Auto Generate",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Generate slug automatically"}},schema:{default_value:!0}},{field:"required",name:"Required",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Slug is required"}},schema:{default_value:!0}},{field:"separator",name:"Separator",type:"string",meta:{width:"half",interface:"select-dropdown",options:{choices:[{text:"Hyphen (-)",value:"-"},{text:"Underscore (_)",value:"_"}]}},schema:{default_value:"-"}},{field:"lowercase",name:"Lowercase",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Convert to lowercase"}},schema:{default_value:!0}},{field:"placeholder",name:"Placeholder",type:"string",meta:{width:"half",interface:"input",options:{placeholder:"Enter placeholder text..."}}},{field:"custom_empty_message",name:"Custom Empty Error Message",type:"string",meta:{width:"full",interface:"input",options:{placeholder:"Slug cannot be empty. Please enter a valid slug."}}},{field:"custom_format_message",name:"Custom Format Error Message",type:"string",meta:{width:"full",interface:"input",options:{placeholder:"Slug must contain only lowercase letters, numbers, hyphens, and forward slashes."}}},{field:"allow_duplicates",name:"Allow Duplicate Slugs",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Allow duplicate slugs across collections"}},schema:{default_value:!1}},{field:"auto_update_mode",name:"Auto Update Mode",type:"string",meta:{width:"half",interface:"select-dropdown",options:{choices:[{text:"Disabled",value:"disabled"},{text:"On Change",value:"change"},{text:"On Blur",value:"blur"},{text:"On Focus",value:"focus"},{text:"Real-time",value:"realtime"}]}},schema:{default_value:"change"}},{field:"preserve_existing",name:"Preserve Existing Values",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Preserve existing URL values when source changes"}},schema:{default_value:!1}},{field:"update_delay",name:"Update Delay (ms)",type:"integer",meta:{width:"half",interface:"input",options:{placeholder:"100"}},schema:{default_value:100}},{field:"show_preview_link",name:"Show Preview Link",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Display a preview link under the field"}},schema:{default_value:!0}},{field:"preview_base_url",name:"Preview Base URL",type:"string",meta:{width:"full",interface:"input",options:{placeholder:"https://example.com"}}},{field:"preview_open_in_new_tab",name:"Open Preview in New Tab",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Open preview link in a new browser tab"}},schema:{default_value:!0}}]});export{H as default};
