import{useStores as e,defineDisplay as t}from"@directus/extensions-sdk";import{defineComponent as a,resolveComponent as n,resolveDirective as l,openBlock as i,createBlock as o,withCtx as s,createElementVNode as r,unref as f,withModifiers as d,withDirectives as p,createCommentVNode as u,createElementBlock as c,normalizeClass as m,toDisplayString as y,createVNode as h,Transition as v}from"vue";const _={class:"ext-display-link__wrapper"},x=["target"];var w=a({__name:"display",props:{value:{default:null},kind:{default:"url"},showLinkButton:{type:Boolean,default:!0},icon:{default:"open_in_new"},showUrl:{type:Boolean,default:!0},font:{default:"sans-serif"},showClipboard:{type:Boolean,default:!0},openInNew:{type:Boolean,default:!0},prefix:{default:""},suffix:{default:""},showPrefix:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1}},setup(t){var a;const w=t,{useNotificationsStore:b}=e(),k=b(),$=w.showPrefix?w.prefix:"",g=w.showSuffix?w.suffix:"",S=`${$}${w.value}${g}`,C=`${w.prefix||""}${null!=(a=w.value)?a:""}${w.suffix||""}`,B=`${{url:"",email:"mailto:",tel:"tel:"}[w.kind]}${C}`,L={url:"Open",email:"Send email to",tel:"Call"}[w.kind],U=w.openInNew?"_blank":void 0;async function T(){var e;try{await(null==(e=null==navigator?void 0:navigator.clipboard)?void 0:e.writeText(C)),k.add({title:"Copied!",type:"success"})}catch(e){e instanceof Error&&k.add({title:"Error!",type:"error",error:e})}}return(e,t)=>{const a=n("v-null"),w=n("v-icon"),b=n("v-hover"),k=l("tooltip");return null===e.value?(i(),o(a,{key:0})):(i(),o(b,{key:1,class:"ext-display-link"},{default:s((({hover:a})=>[r("div",_,[r("a",{href:B,target:f(U),onClick:t[0]||(t[0]=d((()=>{}),["stop"]))},[e.showLinkButton?p((i(),o(w,{key:0,class:"ext-display-link__icon",name:e.icon,left:""},null,8,["name"])),[[k,`${f(L)} ${C}`]]):u("v-if",!0)],8,x),e.showUrl?(i(),c("span",{key:0,class:m([[e.font],"ext-display-link__url"])},y(S),2)):u("v-if",!0),h(v,{name:"fade"},{default:s((()=>[!e.showClipboard||e.showUrl&&!a?u("v-if",!0):p((i(),o(w,{key:0,class:"ext-display-link__clip",right:"",name:"content_copy",onClick:d(T,["stop"])},null,512)),[[k,`Copy to clipboard \n ${C}`]])])),_:2},1024)])])),_:1}))}}}),b=[],k=[];!function(e,t){if(e&&"undefined"!=typeof document){var a,n=!0===t.prepend?"prepend":"append",l=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(l){var o=b.indexOf(i);-1===o&&(o=b.push(i)-1,k[o]={}),a=k[o]&&k[o][n]?k[o][n]:k[o][n]=s()}else a=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),l=0;l<a.length;l++)e.setAttribute(a[l],t.attributes[a[l]]);var o="prepend"===n?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}("\n.ext-display-link {\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n}\n.ext-display-link__wrapper {\n  display: flex;\n  line-height: 18px;\n}\n.ext-display-link__url {\n  flex-shrink: 1;\n  overflow: hidden;\n}\n.ext-display-link__url.sans-serif {\n  font-family: var(--family-sans-serif);\n}\n.ext-display-link__url.serif {\n  font-family: var(--family-serif);\n}\n.ext-display-link__url.monospace {\n  font-family: var(--family-monospace);\n}\n.ext-display-link__icon,\n.ext-display-link__clip {\n  --v-icon-size: 18px;\n}\n.ext-display-link__icon:hover,\n.ext-display-link__clip:hover {\n  --v-icon-color: var(--primary);\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n",{});var $=t({id:"extension-display-link",name:"Link",icon:"open_in_new",description:"Display URLs, phone numbers, and emails with a link button",component:((e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a})(w,[["__file","display.vue"]]),options:[{field:"kind",name:"Type",meta:{width:"full",interface:"select-dropdown",options:{choices:[{text:"URL",value:"url"},{text:"Telephone",value:"tel"},{text:"Email",value:"email"}]}},schema:{default_value:"url"}},{field:"showLinkButton",name:"Show link button",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display a link button"}},schema:{default_value:!0}},{field:"icon",name:"$t:displays.formatted-value.icon",type:"string",meta:{width:"half",interface:"select-icon"},schema:{default_value:"open_in_new"}},{field:"showUrl",name:"Show URL",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display the URL"}},schema:{default_value:!0}},{field:"font",name:"$t:displays.formatted-value.font",meta:{width:"half",interface:"select-dropdown",options:{choices:[{text:"$t:displays.formatted-value.font_sans_serif",value:"sans-serif"},{text:"$t:displays.formatted-value.font_serif",value:"serif"},{text:"$t:displays.formatted-value.font_monospace",value:"monospace"}]}},schema:{default_value:"sans-serif"}},{field:"showClipboard",name:"Copy to clipboard",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display a copy to clipboard"}},schema:{default_value:!0}},{field:"openInNew",name:"Open in new tab",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Open link in new tab"}},schema:{default_value:!0}},{field:"prefix",name:"$t:displays.formatted-value.prefix",type:"string",meta:{width:"half",interface:"input",options:{label:"$t:displays.formatted-value.prefix_label",placeholder:"https://",trim:!0}},schema:{default_value:""}},{field:"suffix",name:"$t:displays.formatted-value.suffix",type:"string",meta:{width:"half",interface:"input",options:{label:"$t:displays.formatted-value.suffix_label",trim:!0}},schema:{default_value:""}},{field:"showPrefix",name:"Show prefix",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display prefix in view"}},schema:{default_value:!1}},{field:"showSuffix",name:"Show suffix",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display suffix in view"}},schema:{default_value:!1}}],types:["string","text","uuid","integer"]});export{$ as default};
